<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="assents/style.css">
    <title>Bloom- Floricultura</title>
</head>
<body>
    <!--
    coisas mais importantes para fazer:

    pesquisar como fazer o sistema de carrinho funcional e a parte de produtos favoritos
      adicionar mais produtos e ver como o carrinho se comporta

      adicionar o icone de favoritos e ver se a seção de favoritos funciona

      ver onde o elemento  pega a foto do produto para aparecer no carrinho 

      pedir para que, ao usuario adionar um mesmo produto que já esta no carrinho de compras, que não seja adionado como se fosse outro produtos, mas sim o mesmo, mudando somente na quantidade do produto adioionado

      na seção de favoritos, o usuario pode apenas favoritar uma unica vez, pq se ela clicar no favorito novamente, isso remove o item
      
      pedir para que, ao usuario fazer qualquer alteração no carrinho ele não se feche ao não ser que ele clique fora ou no botão de fechar

    fazer a seção de compras

    mudar a palavra WHATSAPP do banner de personalizados para WHATSZAP

    fazer uma capa para a seção de categorias na parte de personalizados
      mexer nos links

      favicon
    -->
    <div class="container-bloom">
      <nav class="nav">
        <div class="nav-container">
          <div class="logo-bloom" aria-label="Logo Bloom"></div>
          
          <div class="nav-links">
            <a href="#" class="nav-link">Suporte</a>
            <a href="#" class="nav-link">Login</a>
            
            <div class="nav-icons">
        <!-- Botão do Carrinho com contador -->
              <button aria-label="Carrinho de compras" class="icon-cart" id="cartButton">
                <div class="icon-cart"></div>
                <span class="cart-count">0</span>
              </button>      
              
              <!-- Botão de Favoritos com contador -->
              <button aria-label="Favoritos"  id="favoriteButton">
                <div class="icon-favorite"></div>
                <span class="favorite-count">0</span>
              </button>
            </div>
          </div>
          
          <!-- Painel do Carrinho (hidden por padrão) -->
          <div class="cart-panel" id="cartPanel">
            <div class="panel-header">
              <h3>Seu Carrinho</h3>
              <button class="close-panel">&times;</button>
            </div>
            <div class="cart-items" id="cartItems">
              <!-- Itens serão adicionados dinamicamente aqui -->
              <p class="empty-message">Seu carrinho está vazio</p>
            </div>
            <div class="cart-summary">
              <p>Total: <span class="cart-total">R$0,00</span></p>
              <button class="btn-checkout">Finalizar Compra</button>
            </div>
          </div>
          
          <!-- Painel de Favoritos (hidden por padrão) -->
          <div class="favorites-panel" id="favoritesPanel">
            <div class="panel-header">
              <h3>Seus Favoritos</h3>
              <button class="close-panel">&times;</button>
            </div>
            <div class="favorites-items" id="favoritesItems">
              <!-- Itens serão adicionados dinamicamente aqui -->
              <p class="empty-message">Você não tem favoritos ainda</p>
            </div>
          </div>
        </div>
      </nav>

      <!-- Notificação flutuante -->
      <div class="notification" id="notification"></div>

      <section class="video-section">
        <video autoplay muted loop class="video-bloom">
          <source src="assents/video/video-bloom.mp4" type="video/mp4">
        </video>
      </section>

      <section class="benefits-section">
        <div class="benefits-container">
          <div class="benefits-grid">
            <div class="benefit-item">
              <div class="benefit-icon icon-delivery"></div>
              <h2 class="benefit-title">Entrega Rápida</h2>
              <p class="benefit-description">Receba flores no mesmo dia e encante com elegância, agilidade e comodidade.</p>
            </div>
            
            <div class="benefit-item">
              <div class="benefit-icon icon-freight"></div>
              <h2 class="benefit-title">Frete Grátis</h2>
              <p class="benefit-description">Desfrute da conveniência de frete grátis em entregas realizadas no período comercial.</p>
            </div>
            
            <div class="benefit-item">
              <div class="benefit-icon icon-card"></div>
              <h2 class="benefit-title">Tudo em 3x sem juros</h2>
              <p class="benefit-description">Facilidade no pagamento: desfrute da flexibilidade e praticidade das nossas condições exclusivas.</p>
            </div>
          </div>
        </div>
      </section>

      <section class="product-category">
        <h2 class="category-title">Nossos produtos</h2>
        <div class="categories-grid">
          <a class="category-card">
            <div class="category-image">
              <img src="assents/flores/Rosas-colombianas/Buquê de Rosas Colombianas vermelho.png" alt="Rosas Colombianas" loading="lazy">
            </div>
            <h3 class="category-name">Rosas Colombianas</h3>
          </a>

          <a class="category-card">
            <div class="category-image">
              <img src="assents/flores/orquideas/Buquê Premium de Orq mista.png" alt="Rosas Colombianas" loading="lazy">
            </div>
            <h3 class="category-name">Orquideas</h3>
          </a>

          <a class="category-card">
            <div class="category-image">
              <img src="assents/flores/peonias/Buquê de Peônias pink.png" alt="Rosas Colombianas" loading="lazy">
            </div>
            <h3 class="category-name">Peonias</h3>
          </a>

          <a class="category-card">
            <div class="category-image">
              <img src="assents/flores/lirios-rosas/Buquê de Lírios e Rosa branca.png" alt="Rosas Colombianas" loading="lazy">
            </div>
            <h3 class="category-name">Liríos e Rosas</h3>
          </a>

          <a class="category-card">
            <div class="category-image">
              <img src="assents/flores/caixas-luxo/Buquê em Caixa Luxuo.png" alt="Rosas Colombianas" loading="lazy">
            </div>
            <h3 class="category-name">Caixas de Luxo</h3>
          </a>

          <a class="category-card">
            <div class="category-image">
              <img src="assents/flores/Rosas-colombianas/Buquê de Rosas Colombianas vermelho.png" alt="Rosas Colombianas" loading="lazy">
            </div>
            <h3 class="category-name">Personalizado</h3>
          </a>
        </div>    
      </section>

      <section class="products-section">
        <div class="container-products">
          <h2>Nossos Produtos</h2>
          
          <div class="product-list">
            <!-- Produto 1 -->
            <article class="product-item">
              <div class="product-header">
                <h3>Rosas Colombianas</h3>
                <button class="btn-favorite" aria-label="Favoritar produto">
                  <span class="icon-favorite"></span>
                </button>
              </div>
              
              <div class="product-content">
                <div class="product-image rosas-colombianas"></div>
                <p class="product-name">Buquê Rosas Colombianas Vermelhas</p>
                <p class="product-price">R$250,00</p>
                
                <div class="product-actions">
                  <button class="btn-add-to-cart">
                    <span class="icon-cart"></span> Adicionar
                  </button>
                </div>
              </div>
            </article>
            
            <!-- Mais produtos podem ser adicionados aqui -->
          </div>
        </div>
      </section>
      
      <section class="orders-personalized">
        <div class="container-orders-personalized">
          <div class="banner-orders-personalized"></div>
          <a href="#" class="icon-whatszap-orders-personalized"></a>
          <div class="content-text-orders-personalized">
            <p>Seu momento merece o extraorginário. Sabia como podemos encantar você, entre em contato.</p>
            <a href="#">Mandar Mensagem</a>
          </div>
        </div>
      </section>

      <section class="content-history-bloom">
        <div class="content-historia">
          <div class="texto-inicial" id="textoInicial">
            <p>Me permita contar a história da Bloom...</p>
            <button id="btnContarHistoria" class="btn-historia">Contar História</button>
          </div>
          <div class="historia-content" id="historiaContent">
            <div id="conteudoHistoria"></div>
            <button id="btnVoltar" class="btn-voltar">Voltar</button>
          </div>
        </div>
      </section>

      <section class="localize">
        <div class="location">
          <div class="location-selector">
            <h2>Aqui, flores ganham vida em um ambiente de puro encanto. Venha nos conhecer pessoalmente.</h2>
            <p>Selecione sua localização</p>
              
            <div class="select-group">
                <select id="estado" required>
                    <option value=""></option>
                    <option value="SP">São Paulo</option>
                    <option value="RJ">Rio de Janeiro</option>
                    <option value="MG">Minas Gerais</option>
                    <option value="RS">Rio Grande do Sul</option>
                </select>
                <label for="estado">Estado</label>
            </div>
              
            <div class="select-group">
                <select id="cidade" disabled required>
                    <option value=""></option>
                </select>
                <label for="cidade">Cidade</label>
            </div>
            
            <div id="map"></div>
          </div>
        </div>
    </section>

    </div>

    
    <script src="assents/script.js"></script>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
     <script>
      const cidadesComCoordenadas = {
              'SP': [
                  { nome: 'São Paulo', lat: -23.5505, lng: -46.6333 },
                  { nome: 'Campinas', lat: -22.9056, lng: -47.0608 },
                  { nome: 'Santos', lat: -23.9608, lng: -46.3336 }
              ],
              'RJ': [
                  { nome: 'Rio de Janeiro', lat: -22.9068, lng: -43.1729 },
                  { nome: 'Niterói', lat: -22.8837, lng: -43.1034 },
                  { nome: 'Petrópolis', lat: -22.5050, lng: -43.1789 }
              ],
              'MG': [
                  { nome: 'Belo Horizonte', lat: -19.9167, lng: -43.9345 },
                  { nome: 'Uberlândia', lat: -18.9186, lng: -48.2772 },
                  { nome: 'Juiz de Fora', lat: -21.7645, lng: -43.3502 }
              ],
              'RS': [
                  { nome: 'Porto Alegre', lat: -30.0331, lng: -51.2300 },
                  { nome: 'Caxias do Sul', lat: -29.1678, lng: -51.1788 },
                  { nome: 'Pelotas', lat: -31.7719, lng: -52.3425 }
              ]
          };

          // Variáveis globais
          let map;
          let marker = null;

          // Inicialização quando o DOM estiver carregado
          document.addEventListener('DOMContentLoaded', function() {
              // Inicializa o mapa
              map = L.map('map').setView([-15.795, -47.891], 4);
              L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                  attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
              }).addTo(map);

              // Configura eventos
              const estadoSelect = document.getElementById('estado');
              const cidadeSelect = document.getElementById('cidade');
              
              estadoSelect.addEventListener('change', function() {
                  if (this.value) {
                      // Ativa o label flutuante
                      this.classList.add('has-value');
                      
                      // Carrega cidades
                      carregarCidades();
                  } else {
                      this.classList.remove('has-value');
                  }
              });
              
              cidadeSelect.addEventListener('change', function() {
                  if (this.value) {
                      this.classList.add('has-value');
                      atualizarMapa();
                  } else {
                      this.classList.remove('has-value');
                  }
              });
          });

          function carregarCidades() {
              const estadoSelect = document.getElementById('estado');
              const cidadeSelect = document.getElementById('cidade');
              
              const estado = estadoSelect.value;
              
              // Limpa as opções atuais
              cidadeSelect.innerHTML = '<option value=""></option>';
              cidadeSelect.disabled = false;
              
              // Adiciona as cidades do estado selecionado
              cidadesComCoordenadas[estado].forEach(cidade => {
                  const option = document.createElement('option');
                  option.value = cidade.nome;
                  option.textContent = cidade.nome;
                  option.setAttribute('data-lat', cidade.lat);
                  option.setAttribute('data-lng', cidade.lng);
                  cidadeSelect.appendChild(option);
              });
              
              // Força a atualização do label
              cidadeSelect.dispatchEvent(new Event('change'));
          }

          function atualizarMapa() {
              const cidadeSelect = document.getElementById('cidade');
              const selectedOption = cidadeSelect.options[cidadeSelect.selectedIndex];
              
              if (selectedOption.value) {
                  const lat = selectedOption.getAttribute('data-lat');
                  const lng = selectedOption.getAttribute('data-lng');
                  
                  // Atualiza a visualização do mapa
                  map.setView([lat, lng], 12);
                  
                  // Remove o marcador anterior se existir
                  if (marker) {
                      map.removeLayer(marker);
                  }
                  
                  // Adiciona um novo marcador
                  marker = L.marker([lat, lng]).addTo(map)
                      .bindPopup(`<b>${selectedOption.value}</b>`)
                      .openPopup();
              }
          }
    </script>
</body>
</html>